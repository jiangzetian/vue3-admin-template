var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;import{d as i,c as r,D as l,M as d,K as m,a as c,r as p,o as _,b as h,e as v,w as g,u as f,f as y,t as b,g as k,h as x,F as O,i as E,j as R,k as M,l as w,m as I,n as L,p as D,q as j,s as P,P as S,v as A,x as T,y as V,z as C,A as K,B as U,C as $,E as z,G as H,H as q}from"./vendor.a858915b.js";const J=i("user",{state:()=>({token:"",userInfo:{},routes:[]}),actions:{setToken(e){this.token=e},setUserInfo(e){this.userInfo=e},setRoutes(e){this.routes=e},clearToken(){this.token=""},clearUser(){this.userInfo={}},clearRoutes(){this.routes=[]}},persist:{enabled:!0,strategies:[{key:"token",storage:localStorage,paths:["token"]},{key:"userInfo",storage:localStorage,paths:["userInfo"]},{key:"routes",storage:localStorage,paths:["routes"]}]}}),N=i("loading",{state:()=>({loadingState:!1}),actions:{showLoading(){this.loadingState=!0},hideLoading(){this.loadingState=!1}}}),B=i("layout",{state:()=>({menuCollapsed:!1}),actions:{menuTrigger(){this.menuCollapsed=!this.menuCollapsed}}}),F={DashboardOutlined:l,MenuOutlined:d,KeyOutlined:m},G=e=>{const{icon:t}=e;return r(F[t])};var W=c({__name:"SubMenu",props:{routesSubData:{type:Object,default:()=>{}}},setup:e=>(t,n)=>{const a=p("sub-menu",!0),o=p("a-menu-item"),s=p("a-sub-menu");return _(),h(s,{key:e.routesSubData.name},v({title:g((()=>[y(b(e.routesSubData.meta.title),1)])),default:g((()=>[(_(!0),k(O,null,x(e.routesSubData.children,(e=>(_(),k(O,null,[e.children&&e.children.length>0?(_(),h(a,{"routes-sub-data":e,key:e.name},null,8,["routes-sub-data"])):(_(),h(o,{key:e.name},v({default:g((()=>[E("span",null,b(e.meta.title),1)])),_:2},[e.meta.icon?{name:"icon",fn:g((()=>[r(f(G),{icon:e.meta.icon},null,8,["icon"])])),key:"0"}:void 0]),1024))],64)))),256))])),_:2},[e.routesSubData.meta.icon?{name:"icon",fn:g((()=>[r(f(G),{icon:e.routesSubData.meta.icon},null,8,["icon"])])),key:"0"}:void 0]),1024)}}),Q=c({__name:"Menu",setup(e){const t=R(),n=M(),a=w([]),o=w([]),s=e=>{n.push({name:e.key})},u=e=>(e.sort(((e,t)=>e.meta.sort-t.meta.sort)),e.map((e=>{const t=e;return t.children&&t.children.length>0&&u(t.children),t})));return I((()=>{(()=>{let e=n.getRoutes();e=e.filter((e=>e.meta.menu&&2===e.path.split("/").length)),u(e),o.value=e,a.value=[t.name]})()})),L((()=>t.name),(e=>{e&&(a.value=[t.name])})),(e,t)=>{const n=p("a-menu-item"),u=p("a-menu");return _(),h(u,{theme:"dark",mode:"inline",selectedKeys:a.value,"onUpdate:selectedKeys":t[0]||(t[0]=e=>a.value=e),onSelect:s},{default:g((()=>[(_(!0),k(O,null,x(o.value,(e=>(_(),k(O,null,[e.meta.menu?(_(),k(O,{key:0},[e.children&&e.children.length>0?(_(),h(W,{"routes-sub-data":e,key:e.name},null,8,["routes-sub-data"])):(_(),h(n,{key:e.name},v({default:g((()=>[E("span",null,b(e.meta.title),1)])),_:2},[e.meta.icon?{name:"icon",fn:g((()=>[r(f(G),{icon:e.meta.icon},null,8,["icon"])])),key:"0"}:void 0]),1024))],64)):D("",!0)],64)))),256))])),_:1},8,["selectedKeys"])}}});const X={class:"left"},Y={class:"right"},Z={class:"item"},ee={class:"user"},te={class:"name"},ne=(e=>(A("data-v-55ed45be"),e=e(),T(),e))((()=>E("span",null,"退出系统",-1)));var ae=c({__name:"Header",setup(e){const t=M(),n=B(),a=J(),o=()=>{n.menuTrigger()},s=()=>{t.push("/login")};return(e,t)=>{const u=p("a-avatar"),i=p("a-menu-item"),l=p("a-menu"),d=p("a-dropdown"),m=p("a-layout-header");return _(),h(m,{class:"header"},{default:g((()=>[E("div",X,[E("div",{class:"item",onClick:o},[f(n).menuCollapsed?(_(),h(f(j),{key:0,class:"trigger"})):(_(),h(f(P),{key:1,class:"trigger"}))])]),E("div",Y,[E("div",Z,[r(d,{placement:"bottom"},{overlay:g((()=>[r(l,null,{default:g((()=>[r(i,{onClick:s},{default:g((()=>[r(f(S),{style:{"margin-right":"5px",color:"#f5222d"}}),ne])),_:1})])),_:1})])),default:g((()=>[E("div",ee,[r(u,{class:"avatar",src:f(a).userInfo.avatar},{default:g((()=>[y("登录")])),_:1},8,["src"]),E("span",te,b(f(a).userInfo.name),1)])])),_:1})])])])),_:1})}}});ae.__scopeId="data-v-55ed45be";const oe=(e=>(A("data-v-781d9848"),e=e(),T(),e))((()=>E("div",{class:"logo"},null,-1)));var se=c({__name:"index",setup(e){const t=N(),n=B();return(e,a)=>{const o=p("a-layout-sider"),s=p("router-view"),u=p("a-spin"),i=p("a-layout-content"),l=p("a-layout");return _(),h(l,{class:"layout"},{default:g((()=>[r(o,{collapsed:f(n).menuCollapsed,"onUpdate:collapsed":a[0]||(a[0]=e=>f(n).menuCollapsed=e),trigger:null,collapsible:""},{default:g((()=>[oe,r(Q)])),_:1},8,["collapsed"]),r(l,null,{default:g((()=>[r(ae),r(i,{style:{margin:"24px 16px",padding:"24px",background:"#fff","min-height":"280px"}},{default:g((()=>[r(u,{spinning:f(t).loadingState,delay:300,size:"large"},{default:g((()=>[r(s)])),_:1},8,["spinning"])])),_:1})])),_:1})])),_:1})}}});se.__scopeId="data-v-781d9848";var ue=c({__name:"App",setup(e){const t=R(),n=N();return(e,a)=>{const o=p("router-view"),s=p("a-spin");return f(t).meta.layout?(_(),h(se,{key:0})):(_(),h(s,{key:1,spinning:f(n).loadingState,delay:300,size:"large"},{default:g((()=>[r(o)])),_:1},8,["spinning"]))}}});let ie;const re={},le=function(e,t){if(!t||0===t.length)return e();if(void 0===ie){const e=document.createElement("link").relList;ie=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`/vue3-admin-template/${e}`)in re)return;re[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":ie,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))},de=(e,t)=>e.map((e=>{const n=e;return n.component&&(n.component=t[`../${n.component}`]),n.children&&n.children.length>0&&de(n.children,t),n})),me=(e,t)=>{if(e.routes&&e.routes.length>0){const n=JSON.parse(JSON.stringify(e.routes));de(n,{"../views/404/index.vue":()=>le((()=>import("./index.12ccedb1.js")),["assets/index.12ccedb1.js","assets/index.58dcf166.css","assets/vendor.a858915b.js"]),"../views/Admin/index.vue":()=>le((()=>import("./index.272650fe.js")),["assets/index.272650fe.js","assets/vendor.a858915b.js"]),"../views/Home/index.vue":()=>le((()=>import("./index.f0b88211.js")),["assets/index.f0b88211.js","assets/vendor.a858915b.js"]),"../views/Login/index.vue":()=>le((()=>import("./index.4c2b66b0.js")),["assets/index.4c2b66b0.js","assets/index.ebae505f.css","assets/vendor.a858915b.js"]),"../views/Menu/index.vue":()=>le((()=>import("./index.e8d95604.js")),["assets/index.e8d95604.js","assets/vendor.a858915b.js"]),"../views/Root/index.vue":()=>le((()=>import("./index.6b2299b0.js")),["assets/index.6b2299b0.js","assets/vendor.a858915b.js"]),"../views/Menu/Menu1/index.vue":()=>le((()=>import("./index.de621528.js")),["assets/index.de621528.js","assets/vendor.a858915b.js"]),"../views/Menu/Menu2/index.vue":()=>le((()=>import("./index.4df9d225.js")),["assets/index.4df9d225.js","assets/vendor.a858915b.js"]),"../views/Menu/Menu2/Menu2-1/index.vue":()=>le((()=>import("./index.a8fea10f.js")),["assets/index.a8fea10f.js","assets/vendor.a858915b.js"])}),n.forEach((e=>{t.addRoute(e)}))}t.addRoute({path:"/:pathMatch(.*)*",name:"404",component:()=>le((()=>import("./index.12ccedb1.js")),["assets/index.12ccedb1.js","assets/index.58dcf166.css","assets/vendor.a858915b.js"]),meta:{title:"无法找到该页面",layout:!1,menu:!1}})},ce=[{path:"/",name:"home",component:()=>le((()=>import("./index.f0b88211.js")),["assets/index.f0b88211.js","assets/vendor.a858915b.js"]),meta:{title:"首页",layout:!0,menu:!0,icon:"DashboardOutlined",sort:1}},{path:"/login",name:"Login",component:()=>le((()=>import("./index.4c2b66b0.js")),["assets/index.4c2b66b0.js","assets/index.ebae505f.css","assets/vendor.a858915b.js"]),meta:{title:"登录",layout:!1,menu:!1,icon:"LoginOutlined"}}],pe=V({history:C(),routes:ce});let _e=!0;pe.beforeEach(((e,i,r)=>{const l=J();var d;e.meta.title&&(document.title=e.meta.title),"Login"===e.name||l.token?("Login"===e.name&&(l.clearToken(),l.clearUser(),((e,t)=>{e.routes&&e.routes.length>0&&(e.routes.forEach((e=>{t.removeRoute(e.name)})),e.clearRoutes())})(l,pe)),!i.name&&_e?(me(l,pe),r((d=((e,t)=>{for(var n in t||(t={}))o.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&u(e,n,t[n]);return e})({},e),t(d,n({replace:!0})))),_e=!1):r()):r({name:"Login"})}));const he=[{path:"/root",name:"root",component:"views/Root/index.vue",meta:{title:"Root权限页",layout:!0,menu:!0,icon:"KeyOutlined",sort:2}},{path:"/menu",name:"menu",component:"views/Menu/index.vue",redirect:"/menu/menu1",meta:{title:"多级菜单页",layout:!0,menu:!0,icon:"MenuOutlined",sort:3},children:[{path:"menu1",name:"menu1",component:"views/Menu/Menu1/index.vue",meta:{title:"Menu1页",layout:!0,menu:!0,icon:"MenuOutlined",sort:1}},{path:"menu2",name:"menu2",component:"views/Menu/Menu2/index.vue",redirect:"menu2/menu2-1",meta:{title:"Menu2页",layout:!0,menu:!0,icon:"MenuOutlined",sort:2},children:[{path:"menu2-1",name:"menu2-1",component:"views/Menu/Menu2/Menu2-1/index.vue",meta:{title:"Menu2-1页",layout:!0,menu:!0,icon:"MenuOutlined",sort:3}}]}]}],ve=[{path:"/admin",name:"admin",component:"views/Admin/index.vue",meta:{title:"Admin权限页",layout:!0,menu:!0,icon:"KeyOutlined",sort:2}}],ge=[];var fe=[{url:"/mock/api/login",method:"post",timeout:500,response:({body:e})=>{let t,n=[];return"root"===e.username?(t="Root",n=he):"admin"===e.username?(t="Admin",n=ve):(t="User",n=ge),{code:200,success:!0,message:"ok",data:{token:K.Random.string("lower",200),userInfo:{id:K.Random.id(),name:K.Random.cname(),email:K.Random.email(),gender:K.Random.natural(1,2),age:K.Random.natural(18,30),avatar:K.Random.image("800x800"),role:t},routes:n}}}}];const ye=$(ue),be=z();be.use(H),U([...fe]),ye.use(pe),ye.use(q),ye.use(be),ye.mount("#app");export{J as a,me as b,N as u};
